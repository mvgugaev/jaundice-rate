# Фильтр желтушных новостей

Проект предоставляет API для парсинга статей (по нескольким url) и расчета рейтинга желтушности. Поддерживается запрос формата:
```
http://0.0.0.0:8080?urls=<url1>,<url2>,...
```
Максимальное количество urls: 10, сервер возвращает ответ в формате: 
```
[
    {
        "status": "OK", 
        "url": "https://inosmi.ru/military/20210901/250424381.html", 
        "score": 0.2, 
        "words_count": 502
    },
    ....
]
```
Ошибки приходят в аналогичном формате:
```
[
    {
        "status": "FETCH_ERROR", 
        "url": "https://inosmi.ru/military/empty.html", 
        "score": null, 
        "words_count": null
    }
]
```
Расчет желтушности статьи производится по набору позитивных и негативных слов из файлов:
./charged_dict/negative_words.txt
./charged_dict/positive_words.txt

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

В перспективе можно создать универсальный адаптер, подходящий для всех сайтов, но его разработка будет сложной и потребует дополнительных времени и сил.

# Как установить

Вам понадобится Python версии 3.7 или старше. Для установки пакетов рекомендуется создать виртуальное окружение.

Первым шагом установите пакеты:

```python3
pip install -r requirements.txt
```

# Как запустить

Локально
```python3
python main.py
```

Docker
```
docker-compose up
```

# Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: server.py, text_tools.py и адаптеры. Команды для запуска тестов:

```
python -m pytest adapters/inosmi_ru.py
```

```
python -m pytest text_tools.py
```

```
python -m pytest server.py
```

# Как проверить код
```
flake8 .
```

# Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
